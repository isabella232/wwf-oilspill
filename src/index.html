<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Спорные и чрезвычайные ситуации на нефтегазовых проектах России</title>

</head>

<body>
  <div class="map-container">
    <div id="map" class="map"></div>
  </div>
  <a href="http://nextgis.ru" id="author-logo" class="author-logo" target="_blank">
    <img src="images/nextgis.png" alt="NextGIS">
  </a>
  <a href="https://wwf.ru" id="wwf-logo" class="author-logo wwf-logo" target="_blank">
    <img src="images/WWF-logo.png" alt="wwf">
  </a>

  <!-- Handlebars templates -->
  <script id="info-panel-template" type="text/x-handlebars-template">
    {{#if title}}
    <div class="info-panel__title">
      {{#if link}}
      <a href="{{link}}" class="info-panel__link" target="_blank">{{title}}</a>
      {{else}} {{title}} {{/if}}
    </div>
    {{/if}} {{#if location}}
    <div class="info-panel__location">{{location}}</div>{{/if}} {{#if status}}
    <div class="info-panel__status">{{status}}</div>{{/if}} {{#each properties}}
    <div class="info-panel__item">
      <div class="info-panel__item-title">{{@key}}</div>
      {{{this}}}
    </div>
    {{/each}}
    {{#if title}}
    <button class="btn" id="get-details-info-btn">Подробнее</button>
    {{/if}}
  </script>

  <script>
    var mapConfig = {
      "nextgiscomUrl": "https://barents-kara-xprojects.nextgis.com",
      "center": [60, 65],
      "zoom": 4,
      "basemap": {
        "url": "http://tiles.maps.sputnik.ru/tiles/kmt2/{z}/{x}/{y}.png",
        "attribution": "&copy; <a href=http://osm.org/copyright'>OpenStreetMap</a> contributors;Спутник &copy; Ростелеком"
      },
      "minOffsetRight": 460,
      "layers": [{
        "name": "oilgas_es_pt",
        "id": 187,
        "popupFields": ["answer"],
        "idField": "idrec",
        "detailUrl": "../../oilspill-docs/{id}.pdf"
        // "detailUrl": "http://nextgis.ru/share/{id}.pdf"
      }],
      "defaultStyle": {
        radius: 5,
        fillOpacity: 1,
        weight: 2,
        color: "#ffffff",
        fillColor: "#ffffff",
        opacity: .6,
        fillRule: "nonzero"
      },
      "defaultHoverStyle": {
        radius: 7,
        fillOpacity: 1,
        weight: 4,
        color: "#ffffff",
        fillColor: "#ffffff",
        opacity: .4,
        fillRule: "nonzero"
      },
      "styles": [{
          property: "type",
          label: "спорные ситуации",
          value: "спорная ситуация",
          "style": {
            radius: 5,
            fillOpacity: 1,
            weight: 2,
            color: "#ffffff",
            fillColor: "#7b4ea9",
            opacity: .6,
            fillRule: "nonzero"
          },
          "hoverStyle": {
            radius: 7,
            fillOpacity: 1,
            weight: 4,
            color: "#ffffff",
            fillColor: "#660bc3",
            opacity: .4,
            fillRule: "nonzero"
          }
        },
        {
          property: "type",
          label: "аварийные ситуации",
          value: "аварийная ситуация",
          "style": {
            radius: 5,
            fillOpacity: 1,
            weight: 2,
            color: "#ffffff",
            fillColor: "#a84d4d",
            opacity: .6,
            fillRule: "nonzero"
          },
          "hoverStyle": {
            radius: 7,
            fillOpacity: 1,
            weight: 4,
            color: "#ffffff",
            fillColor: "#c30b0b",
            opacity: .4,
            fillRule: "nonzero"
          }
        },
        {
          property: "type",
          label: "аварийная ситуация + спорная ситуация",
          value: "аварийная ситуация + спорная ситуация",
          "style": {
            radius: 5,
            fillOpacity: 1,
            weight: 2,
            color: "#ffffff",
            fillColor: "#a94e92",
            opacity: .6,
            fillRule: "nonzero"
          },
          "hoverStyle": {
            radius: 7,
            fillOpacity: 1,
            weight: 4,
            color: "#ffffff",
            fillColor: "#984683",
            opacity: .4,
            fillRule: "nonzero"
          }
        },
        // {
        //   property: "type",
        //   label: "инцидент",
        //   value: "инцидент",
        //   "style": {
        //     radius: 5,
        //     fillOpacity: 1,
        //     weight: 2,
        //     color: "#ffffff",
        //     fillColor: "#2F4F4F",
        //     opacity: .6,
        //     fillRule: "nonzero"
        //   },
        //   "hoverStyle": {
        //     radius: 7,
        //     fillOpacity: 1,
        //     weight: 4,
        //     color: "#ffffff",
        //     fillColor: "#000000",
        //     opacity: .4,
        //     fillRule: "nonzero"
        //   }
        // }
      ]
    };

  </script>
</body>

</html>
